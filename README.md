# wrc-logger

「EA Sports WRC」向けのペースノートロガー兼ペースノート読み上げツール

## WRCテレメトリについて

このツールはWRCが出力できるテレメトリUDPパケットを受けることで動作します。あらかじめ、UDPパケット出力を有効にしておいてください。

このツールはデフォルトのリッスンポートは「127.0.0.1:20777」です。コマンドラインオプションで変更できます。

「wrc-logger.exe -listen=127.0.0.1:20778」

また、同じパケット内容を転送する機能もあります。既存で同じパケットを利用している場合は以下のように転送オプションを使ってください。

「wrc-logger.exe -forward="192.168.1.1:20777"」

## ロギングの仕掛けについて

- OBSでゲーム画面をフルHD（1920x1080）で取り込み、「仮想カメラ」にて出力
- このツールのロギングを有効にしたら「仮想カメラ」出力のコドライバーOSD表示のマークを画像解析してログを記録します
- ツールのlogフォルダ配下には「ステージ長.log」というファイルが記録されます
- もし既存のファイルがあれば「ステージ長.log.1」「ステージ長.log.2」と番号が付与されて残ります

「wrc-logger.exe -camera 3」というオプションで仮想カメラの選択を変更できます。

## コドライバー読み上げについて

- VoiceVoxというランタイムを利用して音声合成を行います
- 音声生成の基本辞書が「log/base.json」にあります

### 生成のオプション

- 「-actor アクター番号」: VoiceVoxの話者変更
- 「-speed 0.5～2.0」: しゃべる速度
- 「-pitch 0.5～2.0」: 声の高さを変更
- 「-volume 0.5～2.0」: 音量変更
- 「-offset -50..50」: 読み上げのタイミング変更（メートル単位）

## ログのフォーマット
ファイル名：「log/ステージ長.log」

```
0,straight,unknown,50
47.01781152725222,3-right,unknown,140
199.68337484359745,slight-left,twisty,60
...
32032.167246975354,finish,unknown,0
```

「距離,単語１,単語２,単語３」の羅列です。
距離順にソートされている必要があります。

- 単語１には基本辞書のmarksキーワードかコンマを含まない日本語が直接書けます
- 単語２には基本辞書のiconsキーワードかコンマを含まない日本語が直接書けます、「unknown」は発音無し
- 単語３には基本辞書のdists距離数かコンマを含まない日本語が直接書けます「0」は発音無し

## アクターIDについて

|キャラクター名|スタイル|ID|
|-------|----|-----|
|四国めたん|ノーマル|2|
||あまあま|0|
||ツンツン|6|
||セクシー|4|
||ささやき|36|
||ヒソヒソ|37|
|ずんだもん|ノーマル|3|
||あまあま|1|
||ツンツン|7|
||セクシー|5|
||ささやき|22|
||ヒソヒソ|38|
|春日部つむぎ|ノーマル|8|
|雨晴はう|ノーマル|10|
|波音リツ|ノーマル|9|
|玄野武宏|ノーマル|11|
||喜び|39|
||ツンギレ|40|
||悲しみ|41|
|白上虎太郎|ふつう|12|
||わーい|32|
||びくびく|33|
||おこ|34|
||びえーん|35|
|青山龍星|ノーマル|13|
|冥鳴ひまり|ノーマル|14|
|九州そら|ノーマル|16|
||あまあま|15|
||ツンツン|18|
||セクシー|17|
||ささやき|19|
|もち子さん|ノーマル|20|
|剣崎雌雄|ノーマル|21|
|WhiteCUL|ノーマル|23|
||たのしい|24|
||かなしい|25|
||びえーん|26|
|後鬼|人間ver.|27|
||ぬいぐるみver.|28|
|No.7|ノーマル|29|
||アナウンス|30|
||読み聞かせ|31|
|ちび式じい|ノーマル|42|
|櫻歌ミコ|ノーマル|43|
||第二形態|44|
||ロリ|45|
|小夜/SAYO|ノーマル|46|
|ナースロボ＿タイプＴ|ノーマル|47|
||楽々|48|
||恐怖|49|
||内緒話|50|

